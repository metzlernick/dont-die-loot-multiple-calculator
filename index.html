<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Don't Die — Loot Calculator</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #0d0d1a;
      color: #e2e8f0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem 1rem;
    }

    .container {
      width: 100%;
      max-width: 460px;
    }

    /* ── Header ── */
    .header {
      text-align: center;
      margin-bottom: 1.75rem;
    }

    .header h1 {
      font-size: 1.6rem;
      font-weight: 800;
      background: linear-gradient(135deg, #fbbf24, #c084fc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -0.02em;
    }

    .header p {
      color: #64748b;
      font-size: 0.8rem;
      margin-top: 0.3rem;
    }

    /* ── Sticker grid ── */
    .stickers-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .sticker-card {
      background: #161625;
      border: 2px solid;
      border-radius: 14px;
      padding: 1rem 0.9rem;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
    }

    .sticker-card.common    { border-color: #4b5563; }
    .sticker-card.rare      { border-color: #3b82f6; }
    .sticker-card.legendary { border-color: #f59e0b; }
    .sticker-card.mythic    { border-color: #a855f7; }

    .rarity-name {
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .common    .rarity-name { color: #9ca3af; }
    .rare      .rarity-name { color: #60a5fa; }
    .legendary .rarity-name { color: #fbbf24; }
    .mythic    .rarity-name { color: #c084fc; }

    .pts-badge {
      font-size: 0.68rem;
      color: #475569;
      margin-top: 1px;
    }

    .sticker-input {
      background: #0d0d1a;
      border: 1px solid #1e1e35;
      border-radius: 9px;
      color: #f1f5f9;
      font-size: 1.35rem;
      font-weight: 700;
      padding: 0.45rem 0.5rem;
      width: 100%;
      text-align: center;
      transition: border-color 0.15s;
      -moz-appearance: textfield;
    }
    .sticker-input::-webkit-outer-spin-button,
    .sticker-input::-webkit-inner-spin-button { -webkit-appearance: none; }
    .sticker-input:focus { outline: none; }
    .sticker-input::placeholder { color: #2d3748; }

    .common    .sticker-input:focus { border-color: #4b5563; }
    .rare      .sticker-input:focus { border-color: #3b82f6; }
    .legendary .sticker-input:focus { border-color: #f59e0b; }
    .mythic    .sticker-input:focus { border-color: #a855f7; }

    /* ── Results card ── */
    .results {
      background: #161625;
      border-radius: 14px;
      padding: 1.25rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .stat-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .stat-label {
      font-size: 0.82rem;
      color: #64748b;
    }

    .stat-value {
      font-size: 1rem;
      font-weight: 700;
      color: #e2e8f0;
    }

    .divider {
      border: none;
      border-top: 1px solid #1e1e35;
    }

    /* ── Multiple display ── */
    .multiple-block {
      text-align: center;
      padding: 0.5rem 0 0.25rem;
    }

    .multiple-number {
      font-size: 3.5rem;
      font-weight: 900;
      line-height: 1;
      background: linear-gradient(135deg, #fbbf24, #c084fc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .multiple-sub {
      font-size: 0.78rem;
      color: #475569;
      margin-top: 0.2rem;
      letter-spacing: 0.04em;
    }

    /* ── Progress bar ── */
    .progress-block {
      display: flex;
      flex-direction: column;
      gap: 0.45rem;
    }

    .progress-meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.75rem;
      color: #64748b;
    }

    .bar-bg {
      background: #0d0d1a;
      border-radius: 99px;
      height: 9px;
      overflow: hidden;
    }

    .bar-fill {
      height: 100%;
      border-radius: 99px;
      background: linear-gradient(90deg, #fbbf24, #c084fc);
      transition: width 0.25s ease;
      min-width: 0;
    }

    .progress-hint {
      text-align: right;
      font-size: 0.7rem;
      color: #475569;
    }

    /* ── Max state ── */
    .max-badge {
      text-align: center;
      font-size: 0.85rem;
      color: #c084fc;
      font-weight: 600;
      padding: 0.25rem 0;
      letter-spacing: 0.03em;
    }

    /* ── Threshold table toggle ── */
    .reference-toggle {
      margin-top: 1rem;
      text-align: center;
    }

    .ref-btn {
      background: none;
      border: 1px solid #1e1e35;
      border-radius: 8px;
      color: #475569;
      font-size: 0.72rem;
      padding: 0.4rem 0.9rem;
      cursor: pointer;
      transition: border-color 0.15s, color 0.15s;
    }

    .ref-btn:hover { border-color: #4b5563; color: #94a3b8; }

    .reference-table {
      display: none;
      margin-top: 0.75rem;
      background: #161625;
      border-radius: 12px;
      overflow: hidden;
    }

    .reference-table.open { display: block; }

    .ref-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.55rem 1rem;
      font-size: 0.78rem;
      border-bottom: 1px solid #1a1a2e;
    }

    .ref-row:last-child { border-bottom: none; }

    .ref-row.active {
      background: #1e1e35;
    }

    .ref-mult { font-weight: 700; color: #c084fc; }
    .ref-pts  { color: #64748b; }
    .ref-step { color: #475569; font-size: 0.7rem; }
  </style>
</head>
<body>
  <div class="container">

    <div class="header">
      <h1>Loot Calculator</h1>
      <p>Don't Die &nbsp;·&nbsp; Sticker Multiplier</p>
    </div>

    <div class="stickers-grid">
      <div class="sticker-card common">
        <div>
          <div class="rarity-name">Common</div>
          <div class="pts-badge">1 loot point each</div>
        </div>
        <input class="sticker-input" type="number" id="input-common" min="0" value="" placeholder="0">
      </div>
      <div class="sticker-card rare">
        <div>
          <div class="rarity-name">Rare</div>
          <div class="pts-badge">2 loot points each</div>
        </div>
        <input class="sticker-input" type="number" id="input-rare" min="0" value="" placeholder="0">
      </div>
      <div class="sticker-card legendary">
        <div>
          <div class="rarity-name">Legendary</div>
          <div class="pts-badge">5 loot points each</div>
        </div>
        <input class="sticker-input" type="number" id="input-legendary" min="0" value="" placeholder="0">
      </div>
      <div class="sticker-card mythic">
        <div>
          <div class="rarity-name">Mythic</div>
          <div class="pts-badge">11 loot points each</div>
        </div>
        <input class="sticker-input" type="number" id="input-mythic" min="0" value="" placeholder="0">
      </div>
    </div>

    <div class="results">
      <div class="stat-row">
        <span class="stat-label">Total Sticker Count</span>
        <span class="stat-value" id="total-stickers">0</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">Total Loot Points</span>
        <span class="stat-value" id="total-pts">0</span>
      </div>

      <hr class="divider">

      <div class="multiple-block">
        <div class="multiple-number" id="mult-display">0x</div>
        <div class="multiple-sub">LOOT MULTIPLE</div>
      </div>

      <div id="progress-area"></div>
    </div>

    <div class="reference-toggle">
      <button class="ref-btn" id="ref-toggle-btn" onclick="toggleRef()">Show multiplier thresholds</button>
      <div class="reference-table" id="ref-table"></div>
    </div>

  </div>

  <script>
    // ── Data ─────────────────────────────────────────────────────────
    const RARITY_PTS = { common: 1, rare: 2, legendary: 5, mythic: 11 };

    // THRESHOLDS[i] = cumulative loot points needed to reach i× multiple
    const THRESHOLDS = [0, 5, 10, 16, 22, 28, 36, 44, 52, 60, 68];
    const MAX_MULT = THRESHOLDS.length - 1; // 10

    // ── Calculate ────────────────────────────────────────────────────
    function getTotal() {
      return ['common', 'rare', 'legendary', 'mythic'].reduce((sum, r) => {
        const v = Math.max(0, parseInt(document.getElementById('input-' + r).value) || 0);
        return sum + v * RARITY_PTS[r];
      }, 0);
    }

    function getMultiple(pts) {
      for (let i = THRESHOLDS.length - 1; i >= 0; i--) {
        if (pts >= THRESHOLDS[i]) return i;
      }
      return 0;
    }

    function update() {
      const total = getTotal();
      const mult  = getMultiple(total);

      const stickerCount = ['common', 'rare', 'legendary', 'mythic'].reduce((sum, r) => {
        return sum + (Math.max(0, parseInt(document.getElementById('input-' + r).value) || 0));
      }, 0);
      document.getElementById('total-stickers').textContent = stickerCount;
      document.getElementById('total-pts').textContent = total;
      document.getElementById('mult-display').textContent = mult + 'x';

      const area = document.getElementById('progress-area');

      if (mult >= MAX_MULT) {
        area.innerHTML = '<div class="max-badge">✦ Maximum 10× reached — fully maxed out!</div>';
      } else {
        const lo   = THRESHOLDS[mult];
        const hi   = THRESHOLDS[mult + 1];
        const cur  = total - lo;
        const span = hi - lo;
        const pct  = Math.min(100, (cur / span) * 100);
        const need = hi - total;

        area.innerHTML = `
          <div class="progress-block">
            <div class="progress-meta">
              <span>Progress to ${mult + 1}×</span>
              <span>${cur} / ${span} pts</span>
            </div>
            <div class="bar-bg">
              <div class="bar-fill" style="width:${pct}%"></div>
            </div>
            <div class="progress-hint">
              ${need} more point${need !== 1 ? 's' : ''} to reach ${mult + 1}×
            </div>
          </div>`;
      }

      refreshRefTable(mult);
    }

    // ── Reference table ──────────────────────────────────────────────
    function buildRefTable() {
      const table = document.getElementById('ref-table');
      const steps = ['-', 5, 5, 6, 6, 6, 8, 8, 8, 8, 8];
      table.innerHTML = THRESHOLDS.map((pts, i) => `
        <div class="ref-row" id="ref-row-${i}">
          <span class="ref-mult">${i}×</span>
          <span class="ref-pts">${pts} pts total</span>
          <span class="ref-step">${i === 0 ? '—' : '+' + steps[i] + ' pts'}</span>
        </div>`).join('');
    }

    function refreshRefTable(activeMult) {
      THRESHOLDS.forEach((_, i) => {
        const row = document.getElementById('ref-row-' + i);
        if (row) row.classList.toggle('active', i === activeMult);
      });
    }

    let refOpen = false;
    function toggleRef() {
      refOpen = !refOpen;
      document.getElementById('ref-table').classList.toggle('open', refOpen);
      document.getElementById('ref-toggle-btn').textContent =
        refOpen ? 'Hide multiplier thresholds' : 'Show multiplier thresholds';
    }

    // ── Init ─────────────────────────────────────────────────────────
    buildRefTable();
    document.querySelectorAll('.sticker-input').forEach(el => el.addEventListener('input', update));
    update();
  </script>
</body>
</html>
